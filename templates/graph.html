{% extends "base.html" %}
{% block content %}
    {% if professor_set %}
        <div class="container">
            <div class="row">
                <table>
                    {% for eachprofessor in professor_set %}
                        <tr>
                            <td>
                                <a href="/graph/professor/{{ eachprofessor }}">{{ eachprofessor }}</a>
                            </td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
    {% else %}
        <div class="container">
            <div class="row">
                <h2>{{ professor_name }}</h2>
            </div>
            <div class="row">
                <div class="col-md-auto" id="graph" style="width:100%;height:800px;">
                </div>
            </div>
        </div>
        <script type="text/javascript">
            var myChart = echarts.init(document.getElementById('graph'));
            myChart.showLoading();
            datasourse = {{ professor_json|tojson }};
            myChart.hideLoading();

            // echarts.util.each(datasourse.children, function (datum, index) {
            //     index % 2 === 0 && (datum.collapsed = true);
            // });

            myChart.setOption(option = {
                tooltip: {
                    trigger: 'item',
                    triggerOn: 'mousemove'
                },
                series: [
                    {
                        type: 'tree',

                        data: [datasourse],

                        top: '1%',
                        left: '9%',
                        bottom: '1%',
                        right: '30%',

                        symbolSize: 7,

                        label: {
                            normal: {
                                position: 'left',
                                verticalAlign: 'middle',
                                align: 'right',
                                fontSize: 12
                            }
                        },

                        leaves: {
                            label: {
                                normal: {
                                    position: 'right',
                                    verticalAlign: 'middle',
                                    align: 'left'
                                }
                            }
                        },

                        expandAndCollapse: true,
                        animationDuration: 550,
                        animationDurationUpdate: 750
                    }
                ]
            });
        </script>
    {% endif %}
{% endblock %}